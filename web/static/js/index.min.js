var x$=angular.module("main",["0media.events"]);x$.controller("main",["$scope","$timeout"].concat(function(r,t){var l,n,e,u="http://0media.tw/t/geoevent";for(r.initz=1,r.autoll=!0,r.clat=null,r.clng=null,r.sid=null,r.style="default",r.ratio=20,l=[],n=1;n<=18;++n)e=n,l.push(e);return r.zlvs=l,r.setStyle=function(t){return r.style=t},r.setRatio=function(t){return r.ratio=t},r.updateWidget=function(){return t(function(){if(r.sid&&r.style&&r.ratio&&(r.autoll||r.clat&&r.clng))return r.outurl="/widget/?src="+r.sid+"&color="+r.style+"&ratio="+r.ratio,r.clat&&r.clng&&(r.outurl+="&clat="+r.clat+"&clng="+r.clng),r.autoll||(r.outurl+="&initz="+r.initz),r.outurlwithhost=u+r.outurl,r.embedcode="<iframe src='"+u+r.outurl+"'></iframe>",$("#result").attr("src",r.outurlwithhost)},1e3)},r.generate=function(){return r.updateWidget()},r.$watch("datasrc",function(){var t=/\/d\/([^\/]+)/.exec(r.datasrc);return r.sid=t?t[1]:null}),r.config={src:"1yY4pqGqI3rLMf5bQqe5XMztnnJ78RMUrfh-XpJdhd_o",color:"default",ratio:20,clat:12.573404,clng:-15.193685,initz:2}}));